define(["jquery"],(function($){var cookiePolicyBar;return function(){var document=window.document,supportsTextContent="textContent"in document.body,cookieName="displayCookieConsent",cookieConsentId="cookieChoiceInfo",dismissLinkId="btn-close",cookieText="Utilizziamo i cookie per offrire i nostri servizi. Utilizzando il nostro sito web acconsenti all'utilizzo di cookie secondo la nostra politica di ",cookieBtn="X",cookieTitle="privacy & policy.",cookieUrl=rootUrl;function init(){showCookieConsentBar(cookieText,"X",cookieTitle,cookieUrl)}function _createHeaderElement(cookieText,dismissText,linkText,linkHref){var butterBarStyles="",cookieConsentElement=document.createElement("div");cookieConsentElement.id=cookieConsentId,cookieConsentElement.className="cookie-bar";var inner=document.createElement("div"),cookieicon=document.createElement("div");return inner.className="inner",inner.appendChild(_createConsentText(cookieText,linkText,linkHref)),cookieConsentElement.appendChild(inner),inner.appendChild(_createDismissLink(dismissText)),cookieConsentElement}function _createDialogElement(cookieText,dismissText,linkText,linkHref){var glassStyle="position:fixed;width:100%;height:100%;z-index:999;top:0;left:0;opacity:0.5;filter:alpha(opacity=50);background-color:#ccc;",dialogStyle="z-index:1000;position:fixed;left:50%;top:50%",contentStyle="position:relative;left:-50%;margin-top:-25%;background-color:#fff;padding:20px;box-shadow:4px 4px 25px #888;",cookieConsentElement=document.createElement("div");cookieConsentElement.id=cookieConsentId;var glassPanel=document.createElement("div");glassPanel.style.cssText=glassStyle;var content=document.createElement("div");content.style.cssText=contentStyle;var dialog=document.createElement("div");dialog.style.cssText=dialogStyle;var dismissLink=_createDismissLink(dismissText);return dismissLink.style.display="block",dismissLink.style.textAlign="right",dismissLink.style.marginTop="8px",dismissLink.style.backgroundColor="#fff",content.appendChild(_createConsentText(cookieText,linkText,linkHref)),content.appendChild(dismissLink),dialog.appendChild(content),cookieConsentElement.appendChild(glassPanel),cookieConsentElement.appendChild(dialog),cookieConsentElement}function _setElementText(element,text,linkText,linkHref){supportsTextContent?(element.textContent=text,linkText&&linkHref&&element.appendChild(_createInformationLink(linkText,linkHref))):(element.innerText=text,linkText&&linkHref&&element.appendChild(_createInformationLink(linkText,linkHref)))}function _createConsentText(cookieText,linkText,linkHref){var consentText=document.createElement("div"),p=document.createElement("div");return p.className="wysiwyg",_setElementText(consentText.appendChild(p),cookieText,linkText,linkHref),consentText}function _createDismissLink(dismissText){var dismissLink=document.createElement("a");return _setElementText(dismissLink,dismissText),dismissLink.id="btn-close",dismissLink.href="#",dismissLink}function _createInformationLink(linkText,linkHref){var infoLink=document.createElement("a");return _setElementText(infoLink,linkText),infoLink.href=linkHref,infoLink.className+="",infoLink}function _dismissLinkClick(){return _saveUserPreference(),_removeCookieConsent(),!1}function _showCookieConsent(cookieText,dismissText,linkText,linkHref,isDialog){if(_shouldDisplayConsent()){_removeCookieConsent();var consentElement=isDialog?_createDialogElement(cookieText,dismissText,linkText,linkHref):_createHeaderElement(cookieText,dismissText,linkText,linkHref),fragment=document.createDocumentFragment();fragment.appendChild(consentElement),document.body.appendChild(fragment.cloneNode(!0)),document.getElementById("btn-close").onclick=_dismissLinkClick}}function showCookieConsentBar(cookieText,dismissText,linkText,linkHref){_showCookieConsent(cookieText,dismissText,linkText,linkHref,!1)}function showCookieConsentDialog(cookieText,dismissText,linkText,linkHref){_showCookieConsent(cookieText,dismissText,linkText,linkHref,!0)}function _removeCookieConsent(){var cookieChoiceElement=document.getElementById(cookieConsentId);null!=cookieChoiceElement&&cookieChoiceElement.parentNode.removeChild(cookieChoiceElement)}function _saveUserPreference(){var expiryDate=new Date;expiryDate.setFullYear(expiryDate.getFullYear()+1),document.cookie=cookieName+"=y; expires="+expiryDate.toGMTString()}function _shouldDisplayConsent(){return!document.cookie.match(new RegExp(cookieName+"=([^;]+)"))}return{init:init}}}));